<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Jie-一款能够平替xray的工具!而且还开源</title><meta name="description" content="黑客常用工具"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><script>var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?" + '011aebf2f9f9f3201930e159bcd66b17';
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();</script><!-- End Baidu Analytics --><link rel="icon" href="https://pic.imgdb.cn/item/6639fa110ea9cb14038250f2.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="Jie-一款能够平替xray的工具!Github链接https://github.com/yhy0/Jie
下载链接:https://github.com/yhy0/Jie/releases/tag/v1.0.4
简介通过主动爬虫模式或被动代理获取流量，对流量进行分析、扫描。
使用前请详细阅读文档
主动模式使用 crawlergo 爬虫实现 主动模式下可以通过指定 --copilot 来进入 Security Copilot 模式，扫描完不退出，方便查看 web 结果页面
1./Jie web -t https://public-firing-range.appspot.com/ -p xss -o vulnerability_report.html --copilot



不指定 web 的用户名密码，.."><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="杨CC的工具集合" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">疯狂的杨CC's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Jie-一款能够平替xray的工具!而且还开源</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">所有文章</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">所有文章</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Jie-%E4%B8%80%E6%AC%BE%E8%83%BD%E5%A4%9F%E5%B9%B3%E6%9B%BFxray%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-text">Jie-一款能够平替xray的工具!</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Github%E9%93%BE%E6%8E%A5"><span class="toc-text">Github链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5"><span class="toc-text">下载链接:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">主动模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F-Security-Copilot"><span class="toc-text">被动模式(Security Copilot)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Security-Copilot"><span class="toc-text">Security Copilot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%81%E4%B9%A6%E4%B8%8B%E8%BD%BD"><span class="toc-text">证书下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8"><span class="toc-text">启动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E7%BC%96%E8%AF%91"><span class="toc-text">下载编译</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux-Mac"><span class="toc-text">Linux&#x2F;Mac</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows"><span class="toc-text">Windows</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-Burp-%E8%81%94%E5%8A%A8"><span class="toc-text">与 Burp 联动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#passive-scan-client-%E6%8F%92%E4%BB%B6%EF%BC%88%E5%BC%BA%E7%83%88%E5%BB%BA%E8%AE%AE%EF%BC%89"><span class="toc-text">passive-scan-client 插件（强烈建议）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Burp-%E8%AE%BE%E7%BD%AE%E4%B8%8A%E6%B8%B8%E4%BB%A3%E7%90%86%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">Burp 设置上游代理（不推荐）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">扫描目录结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E-TODO"><span class="toc-text">逻辑漏洞 TODO</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93"><span class="toc-text">第三方库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8-%E8%BF%98%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%EF%BC%8C%E4%BC%98%E5%85%88%E7%BA%A7%E4%BD%8E"><span class="toc-text">漏洞利用(还在开发中，优先级低)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text">参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB"><span class="toc-text">爬虫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%89%AB%E6%8F%8F%E4%BB%A3%E7%90%86"><span class="toc-text">被动扫描代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Xss"><span class="toc-text">Xss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5"><span class="toc-text">SQL 注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#poc"><span class="toc-text">poc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%89%AB"><span class="toc-text">漏扫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E6%BC%8F%E6%B4%9E"><span class="toc-text">一些其他漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF"><span class="toc-text">敏感信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fastjson"><span class="toc-text">Fastjson</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E7%BA%B9"><span class="toc-text">指纹</span></a></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90"><i class="tag post-item-tag">渗透工具推荐</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Jie-一款能够平替xray的工具!而且还开源</h1><time class="has-text-grey" datetime="2024-03-03T09:14:46.000Z">2024-03-03</time><article class="mt-2 post-content"><h1 id="Jie-一款能够平替xray的工具"><a href="#Jie-一款能够平替xray的工具" class="headerlink" title="Jie-一款能够平替xray的工具!"></a>Jie-一款能够平替xray的工具!</h1><h2 id="Github链接"><a href="#Github链接" class="headerlink" title="Github链接"></a>Github链接</h2><p><a href="https://github.com/yhy0/Jie">https://github.com/yhy0/Jie</a></p>
<h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接:"></a>下载链接:</h2><p><a href="https://github.com/yhy0/Jie/releases/tag/v1.0.4">https://github.com/yhy0/Jie/releases/tag/v1.0.4</a></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>通过<a href="https://github.com/Qianlitp/crawlergo">主动爬虫模式</a>或<a href="https://github.com/lqqyt2423/go-mitmproxy">被动代理</a>获取流量，对流量进行分析、扫描。</p>
<p><strong>使用前请详细阅读文档</strong></p>
<h2 id="主动模式"><a href="#主动模式" class="headerlink" title="主动模式"></a>主动模式</h2><p>使用 <a href="https://github.com/Qianlitp/crawlergo">crawlergo</a> 爬虫实现 主动模式下可以通过指定 <code>--copilot</code> 来进入 <strong>Security Copilot</strong> 模式，扫描完不退出，方便查看 web 结果页面</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Jie web -t https://public-firing-range.appspot.com/ -p xss -o vulnerability_report.html --copilot</span><br></pre></td></tr></tbody></table></figure>



<p>不指定 web 的用户名密码，会自动生成一个<code>yhy/密码</code>，可以在日志中查看,比如下面就是自动生成的</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO [cmd:webscan.go(glob):55] Security Copilot web report authorized:yhy/3TxSZw8t8w</span><br></pre></td></tr></tbody></table></figure>

<h2 id="被动模式-Security-Copilot"><a href="#被动模式-Security-Copilot" class="headerlink" title="被动模式(Security Copilot)"></a>被动模式(Security Copilot)</h2><p>被动代理 通过 <a href="https://github.com/lqqyt2423/go-mitmproxy/">go-mitmproxy</a> 实现。</p>
<h3 id="Security-Copilot"><a href="#Security-Copilot" class="headerlink" title="Security Copilot"></a>Security Copilot</h3><p>为什么称之为 <code>Security Copilot</code>,按照我的构想，这不仅仅是一个漏洞扫描器，还是一个集大成的辅助工具。</p>
<p>挂上扫描器后，过一遍网站，即使没有漏洞，也要告诉我这个网站的大致信息(指纹、cdn、端口信息、敏感信息、API 路径、子域名等等)，这样帮助人工进行进一步的梳理，辅助挖洞，而不是扫描完毕没洞就是完事了，还要人工重新过一遍。</p>
<h3 id="证书下载"><a href="#证书下载" class="headerlink" title="证书下载"></a>证书下载</h3><p>被动代理下HTTPS 网站需要安装证书，HTTPS 证书相关逻辑与 <a href="https://mitmproxy.org/">mitmproxy</a> 兼容，并保存在 ~/.mitmproxy 文件夹中。</p>
<p>安装信任根证书, 安装步骤可参考 Python mitmproxy 文档：<a href="https://docs.mitmproxy.org/stable/concepts-certificates/">About Certificates</a>。</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./Jie  web --listen :9081 --web 9088 --user yhy --pwd 123 --debug</span><br></pre></td></tr></tbody></table></figure>



<p>这样会监听 9081 端口，web 界面(SecurityCopilot)开放会在 9088 端口</p>
<p>浏览器指定代理 9081，或者联动 burp</p>
<p><a href="https://github.com/yhy0/Jie/blob/main/images/image-20240101121809597.png"><img src="https://github.com/yhy0/Jie/raw/main/images/image-20240101121809597.png" alt="image-20240101121809597"></a></p>
<p><a href="https://github.com/yhy0/Jie/blob/main/images/image-20240101121931631.png"><img src="https://github.com/yhy0/Jie/raw/main/images/image-20240101121931631.png" alt="image-20240101121931631"></a></p>
<p><a href="https://github.com/yhy0/Jie/blob/main/images/image-20240101121957058.png"><img src="https://github.com/yhy0/Jie/raw/main/images/image-20240101121957058.png" alt="image-20240101121957058"></a></p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>一些配置可以通过 <a href="https://github.com/yhy0/Jie/blob/main/Jie_config.yaml">Jie_config.yaml</a>修改，也可以通过<code>http://127.0.0.1:9088/</code>的配置界面修改（web 界面修改后会实时更新到配置文件中）</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">./Jie web -h</span><br><span class="line">Flags:</span><br><span class="line">      --copilot          Blocking program, go to the default port 9088 to view detailed scan information.</span><br><span class="line">                         主动模式下，可以通过指定该参数阻塞程序，扫描完不退出程序，可以到 web 端口查看信息。</span><br><span class="line">  -h, --help             help for web</span><br><span class="line">      --listen string    use proxy resource collector, value is proxy addr, (example: 127.0.0.1:9080).</span><br><span class="line">                         被动模式监听的代理地址，默认 127.0.0.1:9080</span><br><span class="line">      --np               not run plugin.</span><br><span class="line">                         禁用所有的插件</span><br><span class="line">  -p, --plugin strings   Vulnerable Plugin, (example: --plugin xss,csrf,sql,dir ...)</span><br><span class="line">                         指定开启的插件，当指定 all 时开启全部插件</span><br><span class="line">      --poc strings      specify the nuclei poc to run, separated by ','(example: test.yml,./test/*).</span><br><span class="line">                         自定义的nuclei 漏洞模板地址</span><br><span class="line">      --pwd string       Security Copilot web report authorized pwd.</span><br><span class="line">                         web页面登录密码，不指定会随机生成一个密码</span><br><span class="line">      --show             specifies whether the show the browser in headless mode.</span><br><span class="line">                         主动扫描下是否显示浏览器</span><br><span class="line">      --user string      Security Copilot web report authorized user, (example: yhy).]</span><br><span class="line">                         web页面登录用户名，默认为yhy (default "yhy")</span><br><span class="line">      --web string       Security Copilot web report port, (example: 9088)].</span><br><span class="line">                         web页面端口，默认9088 (default "9088")</span><br><span class="line"></span><br><span class="line">Global Flags:</span><br><span class="line">      --debug           debug</span><br><span class="line">  -f, --file string     target file</span><br><span class="line">                        主动扫描目标列表，每行一个</span><br><span class="line">  -o, --out string      output report file(eg:vulnerability_report.html)</span><br><span class="line">                        漏洞结果报告保存地址</span><br><span class="line">      --proxy string    proxy, (example: --proxy http://127.0.0.1:8080)</span><br><span class="line">                        指定 http/https 代理</span><br><span class="line">  -t, --target string   target</span><br><span class="line">                        主动扫描目标，被动下不需要指定</span><br></pre></td></tr></tbody></table></figure>



<h3 id="下载编译"><a href="#下载编译" class="headerlink" title="下载编译"></a>下载编译</h3><p><a href="https://github.com/yhy0/Jie/releases/latest">https://github.com/yhy0/Jie/releases/latest</a> 中下载对应系统的程序，全程都是由 <strong>Github Action</strong> 自动化构建，请放心使用</p>
<h4 id="Linux-Mac"><a href="#Linux-Mac" class="headerlink" title="Linux/Mac"></a>Linux/Mac</h4><p>执行<code>make</code>即可编译</p>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>安装 <code>MinGW</code></p>
<p>设置 <code>CGO_ENABLED=1</code> ，然后 <code>go build main.go</code>或者在安装<code>MinGM</code>后将<code>make.exe</code>加入环境变量，之后执行<code>make</code></p>
<h3 id="与-Burp-联动"><a href="#与-Burp-联动" class="headerlink" title="与 Burp 联动"></a>与 Burp 联动</h3><h4 id="passive-scan-client-插件（强烈建议）"><a href="#passive-scan-client-插件（强烈建议）" class="headerlink" title="passive-scan-client 插件（强烈建议）"></a>passive-scan-client 插件（强烈建议）</h4><p><a href="https://github.com/yhy0/passive-scan-client">https://github.com/yhy0/passive-scan-client</a></p>
<p><a href="https://github.com/yhy0/Jie/blob/main/images/passive-scan-client.png"><img src="https://github.com/yhy0/Jie/raw/main/images/passive-scan-client.png" alt="passive-scan-client"></a></p>
<p>通过三个监控开关来自由选择哪些过扫描器。<strong>注：js、css 也应该走扫描器来收集信息</strong></p>
<h4 id="Burp-设置上游代理（不推荐）"><a href="#Burp-设置上游代理（不推荐）" class="headerlink" title="Burp 设置上游代理（不推荐）"></a>Burp 设置上游代理（不推荐）</h4><p><a href="https://github.com/yhy0/Jie/blob/main/images/image-20231011213912055.png"><img src="https://github.com/yhy0/Jie/raw/main/images/image-20231011213912055.png" alt="image-20231011213912055"></a></p>
<p>这里的上游代理 Intruder 和 Repeater 模块的流量也会走扫描器</p>
<p>这样会造成自己手动测试的数据流量也会全部走扫描器，这样就不好了，这一块应该是按需的。</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>通过主动或者被动收集过来的流量插件内部会判断是否扫描过 （TODO 扫描插件是否要按某个顺序执行？）</p>
<h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><ul>
<li>网站指纹信息</li>
<li>每个网站请求的 url 收集聚合展示</li>
<li>网站域名信息: cdn/waf/cloud、解析记录</li>
<li>Jwt 自动爆破 (todo 根据域名自动生成字典)</li>
<li>敏感信息</li>
<li>主动的路径扫描（bbscan 规则 ,新增了一个指纹字段，存在指纹时只会扫描对应的规则，比如 对 php 网站就不会扫描 springboot 的规则）</li>
<li>端口信息</li>
<li>收集域名、ip、api</li>
</ul>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>有的扫描会对比收集的指纹信息进行语言环境识别，防止对 php 的网站调用 java 的扫描插件</p>
<h4 id="扫描目录结构"><a href="#扫描目录结构" class="headerlink" title="扫描目录结构"></a>扫描目录结构</h4><p><code>scan</code>目录为扫描插件库，每个目录的插件会处理不同情形</p>
<ul>
<li>PerFile 针对每个url，包括参数啥的</li>
<li>PerFolder 针对url的目录，会分隔目录分别访问</li>
<li>PerServer 对每个domain 的，也就是说一个目标只扫描一次</li>
</ul>
<table>
<thead>
<tr>
<th>插件</th>
<th>介绍</th>
<th>默认是否开启</th>
<th>作用域</th>
</tr>
</thead>
<tbody><tr>
<td>xss</td>
<td>语义分析、原型链污染、dom 污染点传播分析</td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>sql</td>
<td>目前只实现一些简单的SQL注入检测</td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>sqlmap</td>
<td>通过指定 sqlmap API 将流量转发到 sqlmap 进行注入检测</td>
<td>false</td>
<td>PerFile</td>
</tr>
<tr>
<td>ssrf</td>
<td></td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>jsonp</td>
<td></td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>cmd</td>
<td>命令执行</td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>xxe</td>
<td></td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>fastjson</td>
<td>当检测到请求为 json 时，缝合了<a href="https://socialify.git.ci/a1phaboy/">@a1phaboy</a>师傅的<a href="https://socialify.git.ci/a1phaboy/FastjsonScan">FastjsonScan</a>扫描器，探测 fastjson; jackson 暂未实现</td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>bypass403</td>
<td><a href="https://github.com/devploit/dontgo403">dontgo403</a> 403 绕过检测</td>
<td>true</td>
<td>PerFile</td>
</tr>
<tr>
<td>crlf</td>
<td>crlf注入</td>
<td>true</td>
<td>PerFolder</td>
</tr>
<tr>
<td>iis</td>
<td>iis高版本短文件名猜解[iis7.5-10.x-ShortNameFuzz](</td>
<td>false</td>
<td>PerFolder</td>
</tr>
<tr>
<td>nginx-alias-traversal</td>
<td>Nginx 配置错误导致的目录遍历<a href="https://github.com/vulhub/vulhub/blob/6a142caa19620bffa4cda9989697afd5b4136c87/nginx/insecure-configuration/README.md">nginx</a></td>
<td>true</td>
<td>PerFolder</td>
</tr>
<tr>
<td>log4j</td>
<td>log4j 漏洞检测,目前只会测试请求头</td>
<td>true</td>
<td>PerFolder</td>
</tr>
<tr>
<td>bbscan</td>
<td><a href="https://github.com/lijiejie/bbscan">bbscan</a> 规则 目录扫描</td>
<td>true</td>
<td>PerFolder PerServer(这个针对规则中指定了根目录的)</td>
</tr>
<tr>
<td>portScan</td>
<td>使用 <a href="https://github.com/projectdiscovery/naabu">naabu</a> 扫描 Top 1000 端口，然后使用 <a href="https://github.com/praetorian-inc/fingerprintx">fingerprintx</a> 识别服务</td>
<td>false</td>
<td>PerServer</td>
</tr>
<tr>
<td>brute</td>
<td>如果开启服务爆破，会在扫描到端口服务后进行服务爆破</td>
<td></td>
<td>PerServer</td>
</tr>
<tr>
<td>nuclei</td>
<td>集成<a href="https://github.com/projectdiscovery/nuclei">nuclei</a></td>
<td>false</td>
<td>PerServer</td>
</tr>
<tr>
<td>archive</td>
<td>利用 <a href="https://web.archive.org/">https://web.archive.org/</a> 进行获取历史 url 链接(参数)，然后进行扫描</td>
<td>true</td>
<td>PerServer</td>
</tr>
<tr>
<td>poc</td>
<td>go 写的 poc 模块检测， poc 模块依托于指纹识别，只有识别到对应的指纹才会扫描，没有插件化了</td>
<td>false</td>
<td>PerServer</td>
</tr>
</tbody></table>
<h3 id="逻辑漏洞-TODO"><a href="#逻辑漏洞-TODO" class="headerlink" title="逻辑漏洞 TODO"></a>逻辑漏洞 TODO</h3><p>添加多个用户 cookie 进行越权检测（感觉还是 burp 插件自己写测试比较好，这里应该没有必要写）</p>
<h2 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    "github.com/logrusorgru/aurora"</span><br><span class="line">    "github.com/yhy0/Jie/SCopilot"</span><br><span class="line">    "github.com/yhy0/Jie/conf"</span><br><span class="line">    "github.com/yhy0/Jie/crawler"</span><br><span class="line">    "github.com/yhy0/Jie/pkg/output"</span><br><span class="line">    "github.com/yhy0/logging"</span><br><span class="line">    "net/url"</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">  @author: yhy</span><br><span class="line">  @since: 2023/12/28</span><br><span class="line">  @desc: //TODO</span><br><span class="line">**/</span><br><span class="line"></span><br><span class="line">func lib() {</span><br><span class="line">    logging.Logger = logging.New(conf.GlobalConfig.Debug, "", "Jie", true)</span><br><span class="line">    conf.Init()</span><br><span class="line">    conf.GlobalConfig.Http.Proxy = ""</span><br><span class="line">    conf.GlobalConfig.WebScan.Poc = nil</span><br><span class="line">    conf.GlobalConfig.Reverse.Host = "https://dig.pm/"</span><br><span class="line">    conf.GlobalConfig.Passive.WebPort = "9088"</span><br><span class="line">    conf.GlobalConfig.Passive.WebUser = "yhy"</span><br><span class="line">    conf.GlobalConfig.Passive.WebPass = "123456" // 注意修改为强口令</span><br><span class="line"></span><br><span class="line">    // 全部插件开启</span><br><span class="line">    for k := range conf.Plugin {</span><br><span class="line">        // if k == "nuclei" || k == "poc" {</span><br><span class="line">        //     continue</span><br><span class="line">        // }</span><br><span class="line">        conf.Plugin[k] = true</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    if conf.GlobalConfig.Passive.WebPort != "" {</span><br><span class="line">        go SCopilot.Init()</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // 初始化爬虫</span><br><span class="line">    crawler.NewCrawlergo(false)</span><br><span class="line"></span><br><span class="line">    go func() {</span><br><span class="line">        for v := range output.OutChannel {</span><br><span class="line">            // SCopilot 显示</span><br><span class="line">            if conf.GlobalConfig.Passive.WebPort != "" {</span><br><span class="line">                parse, err := url.Parse(v.VulnData.Target)</span><br><span class="line">                if err != nil {</span><br><span class="line">                    logging.Logger.Errorln(err)</span><br><span class="line">                    continue</span><br><span class="line">                }</span><br><span class="line">                msg := output.SCopilotData{</span><br><span class="line">                    Target: v.VulnData.Target,</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                if v.Level == "Low" {</span><br><span class="line">                    msg.InfoMsg = []output.PluginMsg{</span><br><span class="line">                        {</span><br><span class="line">                            Url:      v.VulnData.Target,</span><br><span class="line">                            Plugin:   v.Plugin,</span><br><span class="line">                            Result:   []string{v.VulnData.Payload},</span><br><span class="line">                            Request:  v.VulnData.Request,</span><br><span class="line">                            Response: v.VulnData.Response,</span><br><span class="line">                        },</span><br><span class="line">                    }</span><br><span class="line">                } else {</span><br><span class="line">                    msg.VulMessage = append(msg.VulMessage, v)</span><br><span class="line">                }</span><br><span class="line">                output.SCopilot(parse.Host, msg)</span><br><span class="line">                logging.Logger.Infoln(aurora.Red(v.PrintScreen()).String())</span><br><span class="line">            }</span><br><span class="line">            logging.Logger.Infoln(aurora.Red(v.PrintScreen()).String())</span><br><span class="line">        }</span><br><span class="line">    }()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="漏洞利用-还在开发中，优先级低"><a href="#漏洞利用-还在开发中，优先级低" class="headerlink" title="漏洞利用(还在开发中，优先级低)"></a>漏洞利用(还在开发中，优先级低)</h2><p><strong>目前还在开发，帮助信息我自己都要看代码才能知道，等搞完了在写详细的</strong>。</p>
<p>因大部分漏洞的利用工具使用 java 编写，并且支持的java 版本不同，搞环境太费劲，恶心坏了，所以重新定义了Jie。</p>
<p>Jie: 一款全面而强大的漏洞<code>扫描</code>和<code>利用</code>工具。</p>
<p>目前版本(1.0.0)支持以下漏洞的利用</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">A Powerful security assessment and utilization tools</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  Jie [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  apollo      apollo scan &amp;&amp; exp</span><br><span class="line">  fastjson    fastjson scan &amp;&amp; exp</span><br><span class="line">  help        Help about any command</span><br><span class="line">  log4j       log4j scan &amp;&amp; exp</span><br><span class="line">  other       other scan &amp;&amp; exp bb:BasicBrute、swagger:Swagger、nat:NginxAliasTraversal、dir:dir)</span><br><span class="line">  s2          Struts2 scan &amp;&amp; exp</span><br><span class="line">  shiro       Shiro scan &amp;&amp; exp</span><br><span class="line">  web         Run a web scan task</span><br><span class="line">  weblogic    WebLogic scan &amp;&amp; exp</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --debug           debug</span><br><span class="line">  -f, --file string     target file</span><br><span class="line">  -h, --help            help for Jie</span><br><span class="line">  -o, --out string      output report file(eg:vulnerability_report.html)</span><br><span class="line">      --proxy string    proxy, (example: --proxy http://127.0.0.1:8080)</span><br><span class="line">  -t, --target string   target</span><br><span class="line"></span><br><span class="line">Use "Jie [command] --help" for more information about a command.</span><br></pre></td></tr></tbody></table></figure>



<p>比如 Shiro key 漏洞利用</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 不指定-m 默认为爆破秘钥和利用链</span><br><span class="line">Jie shiro -t http://127.0.0.1</span><br><span class="line"></span><br><span class="line"># 利用</span><br><span class="line">Jie Shiro -t http://127.0.0.1 -m exp -k 213123 -g CCK2 -e spring -km CBC --cmd whoami</span><br></pre></td></tr></tbody></table></figure>



<p>其中借鉴缝合了很多师傅的工具，对应的漏洞扫描和利用中有写，如有遗漏，可以联系我，添加上 后续会缝合支持更多的漏洞利用。</p>
<p><a href="https://jie.fireline.fun/">https://jie.fireline.fun/</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h3><p><a href="https://github.com/Qianlitp/crawlergo">crawlergo</a></p>
<h3 id="被动扫描代理"><a href="#被动扫描代理" class="headerlink" title="被动扫描代理"></a>被动扫描代理</h3><p><a href="https://github.com/lqqyt2423/go-mitmproxy">https://github.com/lqqyt2423/go-mitmproxy</a></p>
<h3 id="Xss"><a href="#Xss" class="headerlink" title="Xss"></a>Xss</h3><p>语义分析、原型链污染、dom 污染点传播分析</p>
<p><a href="https://github.com/w-digital-scanner/w13scan">https://github.com/w-digital-scanner/w13scan</a></p>
<p><a href="https://github.com/ac0d3r/xssfinder">https://github.com/ac0d3r/xssfinder</a></p>
<p><a href="https://github.com/kleiton0x00/ppmap">https://github.com/kleiton0x00/ppmap</a></p>
<h3 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h3><p>提取 <a href="https://github.com/sqlmapproject/sqlmap">sqlmap</a> 中关于检测的代码，提取一部分思想就行了</p>
<h3 id="poc"><a href="#poc" class="headerlink" title="poc"></a>poc</h3><p>通过指纹识别进行对应的漏洞检测</p>
<p>todo 不内置 nuclei 的 yml 文件，改为官方在线下载、更新</p>
<p><a href="https://github.com/projectdiscovery/nuclei">https://github.com/projectdiscovery/nuclei</a></p>
<p>xray poc 中有些写的不规范，导致解析有问题，需要修改 比如： response.status == 200 &amp;&amp; response.headers[“content-type”] == “text/css” &amp;&amp; response.body.bcontains(b”$_GET[‘css’]”)</p>
<p>content-type 应为 Content-Type</p>
<p>但又好像是解析有问题</p>
<p>不使用 xray 的 poc，只使用 nuclei 的 yml 文件 一起使用还要整理，防止重复扫描，nuclei-template 的 poc 已经够了</p>
<h3 id="漏扫"><a href="#漏扫" class="headerlink" title="漏扫"></a>漏扫</h3><p><a href="https://github.com/wrenchonline/glint">https://github.com/wrenchonline/glint</a></p>
<p><a href="https://github.com/veo/vscan">https://github.com/veo/vscan</a></p>
<h3 id="一些其他漏洞"><a href="#一些其他漏洞" class="headerlink" title="一些其他漏洞"></a>一些其他漏洞</h3><h4 id="敏感信息"><a href="#敏感信息" class="headerlink" title="敏感信息"></a>敏感信息</h4><p><a href="https://github.com/mazen160/secrets-patterns-db">https://github.com/mazen160/secrets-patterns-db</a> <a href="https://github.com/pingc0y/URLFinder">https://github.com/pingc0y/URLFinder</a></p>
<h4 id="Fastjson"><a href="#Fastjson" class="headerlink" title="Fastjson"></a>Fastjson</h4><p><a href="https://github.com/a1phaboy/FastjsonScan">https://github.com/a1phaboy/FastjsonScan</a></p>
<h3 id="指纹"><a href="#指纹" class="headerlink" title="指纹"></a>指纹</h3><p><a href="https://github.com/w-digital-scanner/w13scan">https://github.com/w-digital-scanner/w13scan</a></p>
<p><a href="https://github.com/SleepingBag945/dddd">https://github.com/SleepingBag945/dddd</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2024/03/04/23-OneForAll-%E5%8A%9F%E8%83%BD%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86%E5%99%A8/" title="OneForAll-功能及其强大的子域名收集器"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: OneForAll-功能及其强大的子域名收集器</span></a><a class="button is-default" href="/2024/03/02/16-hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" title="Hexo框架-搭建博客(部署服务器)"><span class="has-text-weight-semibold">下一页: Hexo框架-搭建博客(部署服务器)</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Sgyling"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> 疯狂的杨CC 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>